CustomModel "NGC 371 Nebula"
{
	UseForType		"Nebula/Diffuse"
  UseForObject  "NGC 371 Nebula"

	EnableImpostors  true
	EnableDepthTest  false
	EnableDepthWrite false
	EnableBlend      true

	Shader           "nebula_raymarch.glsl"
	ShaderUniforms   "nebula_raymarch_uniforms.cfg"

	BaseShape      "sphere"
	BaseShapeDims  (35 18 40)
	Scale          (1 1 1)
	Bright          2

	//Dust volume parametrization
	Dust_enabled true
	Dust_volume_height 5
	dust_absorption_factor 0.4
	dust_scattering_factor 0.6
	Dust_volume_density_factor 2
	Albedo 0.6

	//Scale
	Internal_scale 40
	//Raymarcher
	Raymarch_step_count 256
	td_break_value 5
	sum_transparency_break (0.01 0.01 0.01)
	//Lights & Stars
	Light_intensivity 6.1157
	Light_Color_11 (1 0.936554 0.894531)
	Light_radius_single_star 20
	Ambient_Light_intensivity 1
	Ambient_Light_Color_11 (1 1 1)

	Single_star false
	Star_position (4.95868 0 0)
	star_empty_sphere_radius 0
	Star_field_scale 0.636364

	Render_star false
	Star_light_coef_1 0.661157
	Star_light_coef_2 4132.23
	Render_star_bloom false
	Bloom_light_coef_1 0.0165289
	Bloom_light_coef_2 909.091

	//HG phase function
	Forward_scattering_g 0.6
	Backward_scattering_g -0.05
	HG_mix_coef 0.644628

	//Emission
	Gas_emission_enabled true
	Gas_volume_height 0.247934
	gas_scattering_factor 0.025
	gas_density_factor 0.1
	Emission_gas_1 true
	//Emission_gas_1_external true
	Nebula_emission_color_1 (0.759433 0.659375 1)
	Emission_gas_1_direction (0 0.0826446 0)
	Emission_gas_1_coef_0 (5 5 5)
	Emission_gas_1_coef_1 0.0743802
	Emission_gas_1_coef_2 2.06612
	Emission_gas_1_coef_3 0.53719
	Emission_gas_2 true
	//Emission_gas_2_external false
	Nebula_emission_color_2 (1 0 0.61875)
	Emission_gas_2_direction (0.206612 0.438017 0.471074)
	Emission_gas_2_coef_0 (5 0.0413222 5)
	Emission_gas_2_coef_1 0.297521
	Emission_gas_2_coef_2 2.39669
	Emission_gas_2_coef_3 0.0413223
	Emission_gas_3 true
	//Emission_gas_3_external false
	Nebula_emission_color_3 (0.786719 1 0.0250001)
	Emission_gas_3_direction (0.0991736 0.735537 0.165289)
	Emission_gas_3_coef_0 (5 0.619835 4.75207)
	Emission_gas_3_coef_1 0.570248
	Emission_gas_3_coef_2 0.826446
	Emission_gas_3_coef_3 0.867769

	Emission_intensivity_coef 20

	NebulaCentPos (0 0 0)

	// SCALE
	NebScaleAbsBoth false
	NebScaleAbsX true
	NebScaleAbsY false
	NebScale 2.25
	NebScaleCoef (1 0.991737)

	// Spiral noise
	SpirNoiseNudge (0.9 0.9)
	SpirNoiseAmount (-1 -1)
	SpirNoiseIter (2 2)
	SpirNoiseCoef (1.73373 1.73373)
	//Spiral Noise 3D
	Nudge_3D_2 (1.32231 1.90083)
	Noise_amount_3D_2 (-1.90083 -3.22314)
	Frequency_iteration_count_3D_2 (0.702479 1.1157)
	SpirNoise3DCoef_2 (1.4876 1.23967)

	// FORM
	NebulaFormPlane true
	NebulaFormPlaneSign (-0.53719 0.0413223)
	NebulaFormPlaneXYZ (1.23967 5.53719 0.909091)
	NebulaFormPlaneHeight -7.19008

	NebulaFormDsk true
	NebulaFormDskSign (-2.10744 -1.1157)
	NebulaFormDskParam (6.28099 9.83471 5.70248)

	NebulaFormCyl true
	NebulaFormCylSign (0.53719 0.371901)
	NebulaFormCylParam (23.5537 11.5702)

	NebulaFormSph true
	NebulaFormSphSign (1.8595 2.85124)
	NebulaFormSphRad 10

	NebulaFormCapsule true
	NebulaFormCapsuleSign (0.371901 0.289256)
	NebulaFormCapsulePos_1 (0.165289 2.47934 8.09917)
	NebulaFormCapsulePos_2 (1.4876 -20 -6.1157)
	NebulaFormCapsuleRadius 17.5207

	NebulaFormTorus true
	NebulaFormTorusSign (0.785124 0.0413223)
	NebulaFormTorusRadius_1 14.0496
	NebulaFormTorusRadius_2 28.9256

	NebulaFormSpir true
	NebulaFormSpirSign (0.3719 0.123967)
	NebulaFormSpirParam (2.52066 3.01653 1.77686 1.69421)

	NebulaFormNoise false
	NebulaFormNoiseSign (0 -0.454545)
	NebulaFormNoiseCoef1 10
	NebulaFormNoiseCoef2 0.4

	NebulaFormFBMNoise true
	NebulaFormFBMNoiseSign (5 1)
	NebulaFormFBMNoiseCoef 40

	NebulaFormSpirNoise false
	NebulaFormSpirNoiseSign (-0.5 -0.454545)
	NebulaFormSpirNoiseCoef1 0.413223
	NebulaFormSpirNoiseCoef2 231.405
	NebulaFormSpirNoiseCoef3 0.165289

	NebulaFormSpirIQNoise true
	NebulaFormSpirIQNoiseSign (1.25 1.25)
	NebulaFormSpirIQNoiseCoef1 0.305785
	NebulaFormSpirIQNoiseCoef2 420
	NebulaFormSpirIQNoiseCoef3 4.5
	NebulaFormSpirIQNoiseCoef4 1.40496

	NebulaFormSpirNoise3D false
	NebulaFormSpirNoise3DSign (0.950413 0.206612)
	NebulaFormSpirNoise3DCoef 1

	// Map
	NebulaMapTwist false
	NebulaMapTwistCoef1 0
	NebulaMapTwistCoef2 0

	NebulaMapThickCoef (-0.454545 -0.289256)
	ExpansionBegin	2.451545000000000e+06
	ExpansionDuration	5.000000000000000e+02
	Randomize	(-0.0413223, 0.305785, -0.0578512)
	ParticleColor	(1, 0.625, 0.827148)


}
